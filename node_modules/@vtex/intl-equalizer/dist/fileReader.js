'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = fileReader;

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function walk(dir, languages, callback) {
  const files = _fs2.default.readdirSync(dir);
  files.forEach(file => {
    const filepath = _path2.default.join(dir, file);
    const stats = _fs2.default.statSync(filepath);
    if (stats.isDirectory()) {
      walk(filepath, callback);
    } else if (stats.isFile() && (languages.includes(_path2.default.basename(filepath, '.js')) || languages.includes(_path2.default.basename(filepath, '.json')))) {
      callback(filepath, stats);
    }
  });
}

function fileReader({ languages, localesDirectory }) {
  const termsPerLanguage = languages.reduce((acc, lang) => {
    acc[lang] = {};
    return acc;
  }, {});

  walk(localesDirectory, languages, filepath => {
    const language = _path2.default.basename(filepath, '.js').replace('.json', '');

    // eslint-disable-next-line @typescript-eslint/no-var-requires
    const terms = require(filepath);

    termsPerLanguage[language] = terms;
  });

  return termsPerLanguage;
}